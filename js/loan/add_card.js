$(function(){var n={name:function(n){return/^[\u4E00-\u9FA5][\u0391-\uFFE5\.]{0,18}[\u4E00-\u9FA5]$/.test(n)},idCard:function(n){return/^(\d{15}$|^\d{18}$|^\d{17}(\d|X|x))$/.test(n)},bankCard:function(n){return/^[\d]{14,19}$/.test(n)}},e="";$(".sms-code").click(function(){var a=$(this);if($(".validator").validator(n)){var t=$("#add-card-form").serializeJSON(),r=$("input[name='id_number']").val(),c={identity_card:{real_name:t.real_name,number:r},bankcard:{phone_number:t.phone_number,deposit_bank_province_code:t.deposit_bank_province_code,deposit_bank_city_code:t.deposit_bank_city_code,number:t.number}};$.postJSON("services/ayh/bankcardCaptcha",c,function(n){CommonUtil.parseHttpResponse(n,function(){e=n.result.bankcard_captcha_id,$.success("短信验证码已发送至手机，请注意查收",function(){a.countDown(),$('[name="bankcard_captcha"]').val("")})},function(n){$.error($.empty2def(n,"保存信息失败"))})})}}),$(".btn-add-card").on("click",function(a){var t=$("input[name='id_number']").val(),r=$("#add-card-form");if(r.validator(n)){var c=r.serializeJSON(),i={bankcard:{number:c.number,phone_number:c.phone_number,deposit_bank_province_code:c.deposit_bank_province_code,deposit_bank_city_code:c.deposit_bank_city_code},identity_card:{real_name:c.real_name,number:t},bankcard_captcha:{bankcard_captcha_id:e,bankcard_captcha:c.bankcard_captcha}};$.postJSON("services/ayh/addBankcards",i,function(n){CommonUtil.parseHttpResponse(n,function(){CommonUtil.sessionStorage.set("SET_ADD_CARD","1"),CommonUtil.sessionStorage.set("SET_MAIN_CARD","1"),$.toast("添加主卡成功！",1e3,function(){history.go(-1)})},function(n){$.error($.empty2def(n,"保存信息失败"))})})}}),$(".yzm-fail a").click(function(){$.alert('<div class="yzm-fail-error" style="text-align: left;font-size: 0.7rem;line-height: 1rem;"><p>短信提交申请已发送到预留手机</p><p>如未收到:<br>1.请确认当前使用的号码为预留手机号码<br>2.请检查短信是否被安全软件拦截</p></div>')})});