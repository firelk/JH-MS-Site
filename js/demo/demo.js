$(function(){var a={bankCardNo:function(a){return a=a.replace(/[^\d]*/g,""),/^[\d]{14,19}$/.test(a)},name:function(a){return/^[\u4E00-\u9FA5][\u0391-\uFFE5\.]{0,18}[\u4E00-\u9FA5]$/.test(a)}};window.BANKCARD=[],$('INPUT[name="bankCardNo"]').on("keyup input",function(a){var n=$(this),e=a.keyCode||a.which,t=n.val();t=t.replace(/[^\d]*/g,""),-1==$.inArray(e,[KEYCODE.Tab,KEYCODE.Enter,KEYCODE.Shift,KEYCODE.Ctrl,KEYCODE.Alt,KEYCODE.CapsLock,KEYCODE.Esc,KEYCODE.Up,KEYCODE.Down,KEYCODE.Left,KEYCODE.Right])&&(/^[\d]{4,}$/.test(t)&&(t=t.replace(/([\d]{4})/g,"$1 ").replace(/[\s]+$/,"")),n.val(t))}).on("blur",function(){var n=$(this).val();if(n=n.replace(/[^\d]*/g,""),a.bankCardNo(n)){var e=CommonUtil.getBankInfo(n);if(e){if(e.card_number_length==n.length)return void $("#bankCardSupport").val("yes");$.warn($(this).data("ruleMsg"))}}$("#bankCardSupport").val("")}),$('.button[name="save"]').on("click",function(){var n=$("form");if(n.validator(a)){var e=n.serializeJSON();e.ident=$('INPUT[name="ident"]').data("value")||e.ident,e.bankCardNo=$('INPUT[name="bankCardNo"]').data("value")||e.bankCardNo.replace(/[^\d]*/g,""),$.postJSON("services/ayh/saveUserInfo",e,function(a){CommonUtil.parseHttpResponse(a,"保存信息",function(a){},function(a){})})}})});