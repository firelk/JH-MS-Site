<!DOCTYPE html>
<html>
<head>
	<title>阅读协议</title>
	
<base href="/bulid/">
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">

<meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=0">

<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black">

<meta name="format-detection" content="telephone=no, email=no">

<meta name="renderer" content="webkit">

<meta http-equiv="Content-Security-Policy" content="block-all-mixed-content">

<link rel="shortcut icon" href="favicon.ico">
<link rel="stylesheet" href="css/base.css">
<link rel="stylesheet" href="css/style.css?v_1503287464420">
<script>window._appPath="/msxfInterface/",window._sitePath="/bulid/"</script>

</head>
<body style="background:#eee">
<header><a href="javascript:history.back(-1)" class="return_a">返回</a>阅读协议</header>
<div class="main">
	
	<div class="three-step region-box">
		<div class="read-agreement-box">
			
			<div class="bd">
				<div class="iframe">
					<iframe src="" id="iframeContract" width="100%" frameborder="0" scrolling="auto"></iframe>
				</div>
			</div>
		</div>
		<button v-on:click="clickFn()" disabled="disabled" class="btn-next btn btn-view">提交</button>
	</div>
	
</div>
</body>
<style>.iframe{height:500px;width:100%;overflow-x:hidden;overflow-y:auto}</style>
	


<script src="js/lib/jquery/3.1.1/jquery.min.js"></script>
<script src="js/lib/jquery.cookie/jquery.cookie.js"></script>
<script src="js/lib/vue/vue.min.js"></script>
<script src="js/lib/vue/vue-resource.min.js"></script>
<script src="js/common/dictionary.js"></script>
<script src="js/common/common.js"></script>
<script src="js/common/main.js?v_1503287464420"></script>


<script>$(function(){new Vue({el:".main",data:{iframeH:500},methods:{scrollFn:function(t){var e=this;$(".iframe").on("scroll",function(t){var n=$(this).height();e.iframeH-$(this).scrollTop()-n<=0&&$(".btn-view").removeAttr("disabled")})},clickFn:function(){this.$http.post(window._appPath+"contract/confirm.do",{openId:$.cookie("openId")},{emulateJSON:!0}).then(function(t){var e=t.data;0==e.code?CommonUtil.redirectUrl("loan/loan_step6.html"):$.alert(e.message)})},getFn:function(){var t=this;this.$http.post(window._appPath+"contract/credit/auth.do",{openId:$.cookie("openId")},{emulateJSON:!0}).then(function(e){var n=e.data;if(console.log(n,"contract/html.do"),0==n.code){$("#iframeContract").contents().find("body").html(n.data.htmlContract);var o=$("#iframeContract").contents().find("html").height();t.iframeH=o,$("#iframeContract").height(o),this.scrollFn()}else $.alert(n.message)})}},created:function(){this.getFn(),$(".iframe").height($(window).height()-234)}})})</script>
</html>
